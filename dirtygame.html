<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- fontawesome cdn -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- bootstrap-CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- css -->
    <style>
    h1{
    border-left: 15px solid #ff4460;
    padding: 8px, 32px;
    margin-top: 0;
    margin-bottom: 42px;
    font-size: 100px;
}

.main_container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    padding: 24px 16px;
    max-width: 1600px; /* Limits the total width */
    margin: auto; /* Centers the container */
}

.scratch_container {
    width: 250px; /* Adjust based on your layout */
    height: 250px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #ff4460; /* Keep the container border */
    border-radius: 100%;
    overflow: hidden;
    position: relative;
}

.scratch_container canvas {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
}

.scratch_container img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Make images fully fill the container */
}




canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    cursor: help;
    /* cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" stroke="%23000000" fill="%23000000" width="20px" height="20px" viewBox="0 0 10.04 10.04"><circle cx="5.02" cy="5.02" r="4.52"/></svg>') 10 10, auto; */
}

    </style>
</head>
<body>
    <div class="container">
        <div class="card text-center">
            <div class="card-header">
              What's the Secret?
            </div>
            <div class="card-body">
              <h3 class="card-title">Scratch to reveal the secret and make it happen</h3>
              <p class="card-text text-danger"><i class="fa-solid fa-triangle-exclamation text-warning"></i>You have to do exactly what u got!</p>
              <a href="randomText.html" class="btn btn-primary">Previous Step</a>
            </div>
          </div>
        <div class="main_container">
            <div class="row">
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/men-shealth-hotseat-1581102043.jpg?resize=640:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card1" width="200px" height="200px"></canvas>
                </div>
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-faceoff-v3-1581102194.jpg?resize=640:*
                            " alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card2" width="200px" height="200px"></canvas>
                </div>
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-thespider-v2-1581103598.jpg?resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card3" width="200px" height="200px"></canvas>
                </div>
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/men-shealth-thecowgirl-1581102015.jpg?resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card4" width="200px" height="200px"></canvas>
                </div>
            </div>  
            <div class="row">
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-reversecowgirl-v2-1581102136.jpg?resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card5" width="200px" height="200px"></canvas>
                </div>
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-gwhiz-v2-1581102368.jpg?resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card6" width="200px" height="200px"></canvas>
                </div>
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-standingdragon-v2-1581102893.jpg?crop=1.00xw:0.722xh;0,0.134xh&resize=640:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card7" width="200px" height="200px"></canvas>
                </div>
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/men-shealth-flatiron-v2-1581102438.jpg?resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card8" width="200px" height="200px"></canvas>
                </div>
            </div> 
            <div class="row">
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-bathroomattendant-v2-1581102921.jpg?crop=1xw:1xh;center,top&resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card9" width="200px" height="200px"></canvas>
                </div>
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-ironchef-v2-1581102562.jpg?crop=1xw:1xh;center,top&resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card10" width="200px" height="200px"></canvas>
                </div>
                
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-theballerina-1581102502.jpg?crop=1xw:1xh;center,top&resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card11" width="200px" height="200px"></canvas>
                </div>
                
                <div class="scratch_container mx-2">
                    <div class="scratch_card">
                        <div class="image">
                            <img src="https://hips.hearstapps.com/hmg-prod/images/menshealth-hoveringbutterfly-1581103629.jpg?resize=980:*" alt="" srcset="">
                        </div>
                    </div>
                    <canvas id="scratch_card12" width="200px" height="200px"></canvas>
                </div>
            </div>        
        </div>
    </div>
<script>
const initCanvas = (canvasId) => {
    let canvas = document.getElementById(canvasId);
    let context = canvas.getContext("2d");

    // Cover the image with a gray layer
    context.fillStyle = "#746D69";
    context.fillRect(0, 0, canvas.width, canvas.height);

    let isDragging = false;

    const scratch = (x, y) => {
        let rect = canvas.getBoundingClientRect();
        let scaleX = canvas.width / rect.width; // Scale factor for X
        let scaleY = canvas.height / rect.height; // Scale factor for Y

        let adjustedX = (x - rect.left) * scaleX;
        let adjustedY = (y - rect.top) * scaleY;

        context.globalCompositeOperation = "destination-out";
        context.beginPath();
        context.arc(adjustedX, adjustedY, 15, 0, 2 * Math.PI);
        context.fill();
    };

    // Mouse Events
    canvas.addEventListener("mousedown", (event) => {
        isDragging = true;
        scratch(event.clientX, event.clientY);
    });

    canvas.addEventListener("mousemove", (event) => {
        if (isDragging) {
            scratch(event.clientX, event.clientY);
        }
    });

    canvas.addEventListener("mouseup", () => {
        isDragging = false;
    });

    canvas.addEventListener("mouseleave", () => {
        isDragging = false;
    });

    // Touch Events
    canvas.addEventListener("touchstart", (event) => {
        isDragging = true;
        let touch = event.touches[0];
        scratch(touch.clientX, touch.clientY);
    });

    canvas.addEventListener("touchmove", (event) => {
        if (isDragging) {
            let touch = event.touches[0];
            scratch(touch.clientX, touch.clientY);
        }
    });

    canvas.addEventListener("touchend", () => {
        isDragging = false;
    });

    canvas.addEventListener("touchcancel", () => {
        isDragging = false;
    });
};

// Initialize all scratch cards
document.addEventListener("DOMContentLoaded", () => {
    for (let i = 1; i <= 12; i++) {
        initCanvas(`scratch_card${i}`);
    }
});

</script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js" integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>
</html>
